{"ast":null,"code":"var _jsxFileName = \"D:\\\\PTIT\\\\Ky2Nam4\\\\QLSV\\\\frontend\\\\src\\\\components\\\\admin\\\\thongkeView\\\\ThongKeView.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Select from \"@mui/material/Select\";\nimport Spinner from \"../../../utils/Spinner\";\nimport * as classes from \"../../../utils/styles\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport { useParams } from \"react-router-dom\";\nimport { SET_ERRORS } from \"../../../redux/actionTypes\";\nimport { getThongkebysomething } from \"../../../redux/actions/adminActions\";\nimport { Bar, BarChart, CartesianGrid, Legend, XAxis, YAxis } from \"recharts\";\nimport \"./index.css\";\nimport ReactModal from \"react-modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst modalStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    padding: \"0\"\n  }\n};\n\nconst ThongKeView = props => {\n  _s();\n\n  var _props$idLopTc;\n\n  const {\n    idLopTc,\n    isOpen,\n    onClose\n  } = props;\n  console.log(\"idLopws tín chỉ\", idLopTc);\n  const dispatch = useDispatch();\n  const [error, setError] = useState({});\n  const [search, setSearch] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const store = useSelector(state => state);\n  const [value, setValue] = useState({\n    idLopTc: props === null || props === void 0 ? void 0 : (_props$idLopTc = props.idLopTc) === null || _props$idLopTc === void 0 ? void 0 : _props$idLopTc.id,\n    col: \"\"\n  }); // console.log(\"store\", store);\n  // http://localhost:9090/api/admin/diem/thong-ke?idLopTc=da6c6f34&col=XEPLOAI\n\n  useEffect(() => {\n    if (Object.keys(store.errors).length !== 0) {\n      setError(store.errors);\n      setLoading(false);\n    }\n  }, [store.errors]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setSearch(true);\n    setLoading(true);\n    setError({});\n    dispatch(getThongkebysomething({\n      params: { ...value\n      }\n    }));\n  };\n\n  const thongkes = useSelector(state => state.admin.thongkes);\n  console.log(\"thongkes\", thongkes);\n  useEffect(() => {\n    if ((thongkes === null || thongkes === void 0 ? void 0 : thongkes.length) !== 0 || (thongkes === null || thongkes === void 0 ? void 0 : thongkes.length) === 0) {\n      setLoading(false);\n    }\n  }, [thongkes]);\n  useEffect(() => {\n    dispatch({\n      type: SET_ERRORS,\n      payload: {}\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ReactModal, {\n    style: modalStyles,\n    ariaHideApp: false,\n    isOpen: isOpen,\n    onRequestClose: onClose,\n    overlayClassName: \"overlay\",\n    shouldCloseOnOverlayClick: true,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-[0.8] mt-3 mx-5 item-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center gap-5\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: classes.adminFormClearButton,\n          type: \"button\",\n          onClick: onClose,\n          children: \"tho\\xE1t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"items-center my-8 mt-2 mb-2 rounded-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"flex flex-col col-span-1 space-y-2\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"department\",\n            children: \"Bi\\u1EC3u \\u0111\\u1ED3 Th\\u1ED1ng k\\xEA theo: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                required: true,\n                displayEmpty: true,\n                sx: {\n                  height: 36\n                },\n                inputProps: {\n                  \"aria-label\": \"Without label\"\n                },\n                value: value.col,\n                onChange: e => setValue({ ...value,\n                  col: e.target.value\n                }),\n                className: `${classes.InputStyle} hover:focus:border-none w-[166px] `,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"\",\n                  children: \"NONE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"CC\",\n                  children: \"Chuy\\xEAn c\\u1EA7n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"GK\",\n                  children: \"Gi\\u1EEFa k\\u1EF3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"CK\",\n                  children: \"Kuoiws k\\u1EF3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"TB\",\n                  children: \"Trung b\\xECnh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"XEPLOAI\",\n                  children: \"X\\u1EBFp lo\\u1EA1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `${classes.adminFormSubmitButton} w-56 ml-3`,\n              type: \"submit\",\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.loadingAndError,\n        children: loading && (thongkes === null || thongkes === void 0 ? void 0 : thongkes.length) !== 0 && /*#__PURE__*/_jsxDEV(Spinner, {\n          message: \"Loading\",\n          height: 50,\n          width: 150,\n          color: \"#157572\",\n          messageColor: \"#157572\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), !loading && search && thongkes && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-[0.8] mt-10 mx-5 item-center\",\n        children: /*#__PURE__*/_jsxDEV(BarChart, {\n          width: 800,\n          height: 300,\n          data: thongkes,\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            label: {\n              value: \"Số lượng\",\n              angle: -90,\n              position: \"insideLeft\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"soLuong\",\n            fill: \"#8884d8\",\n            barSize: 30,\n            label: {\n              position: \"top\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ThongKeView, \"iewlMt43dXs4r+Ytnz6pqSm0xNU=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = ThongKeView;\nexport default ThongKeView;\n\nvar _c;\n\n$RefreshReg$(_c, \"ThongKeView\");","map":{"version":3,"sources":["D:/PTIT/Ky2Nam4/QLSV/frontend/src/components/admin/thongkeView/ThongKeView.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Select","Spinner","classes","MenuItem","useParams","SET_ERRORS","getThongkebysomething","Bar","BarChart","CartesianGrid","Legend","XAxis","YAxis","ReactModal","modalStyles","content","top","left","right","bottom","marginRight","transform","padding","ThongKeView","props","idLopTc","isOpen","onClose","console","log","dispatch","error","setError","search","setSearch","loading","setLoading","store","state","value","setValue","id","col","Object","keys","errors","length","handleSubmit","e","preventDefault","params","thongkes","admin","type","payload","adminFormClearButton","height","target","InputStyle","adminFormSubmitButton","loadingAndError","angle","position"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport Select from \"@mui/material/Select\";\r\nimport Spinner from \"../../../utils/Spinner\";\r\nimport * as classes from \"../../../utils/styles\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { SET_ERRORS } from \"../../../redux/actionTypes\";\r\nimport { getThongkebysomething } from \"../../../redux/actions/adminActions\";\r\nimport { Bar, BarChart, CartesianGrid, Legend, XAxis, YAxis } from \"recharts\";\r\nimport \"./index.css\";\r\nimport ReactModal from \"react-modal\";\r\nconst modalStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    padding: \"0\",\r\n  },\r\n};\r\nconst ThongKeView = (props) => {\r\n  const { idLopTc, isOpen, onClose } = props;\r\n  console.log(\"idLopws tín chỉ\", idLopTc);\r\n  const dispatch = useDispatch();\r\n  const [error, setError] = useState({});\r\n  const [search, setSearch] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const store = useSelector((state) => state);\r\n  const [value, setValue] = useState({\r\n    idLopTc: props?.idLopTc?.id,\r\n    col: \"\",\r\n  });\r\n  // console.log(\"store\", store);\r\n  // http://localhost:9090/api/admin/diem/thong-ke?idLopTc=da6c6f34&col=XEPLOAI\r\n  useEffect(() => {\r\n    if (Object.keys(store.errors).length !== 0) {\r\n      setError(store.errors);\r\n      setLoading(false);\r\n    }\r\n  }, [store.errors]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setSearch(true);\r\n    setLoading(true);\r\n    setError({});\r\n    dispatch(\r\n      getThongkebysomething({\r\n        params: {\r\n          ...value,\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const thongkes = useSelector((state) => state.admin.thongkes);\r\n  console.log(\"thongkes\", thongkes);\r\n\r\n  useEffect(() => {\r\n    if (thongkes?.length !== 0 || thongkes?.length === 0) {\r\n      setLoading(false);\r\n    }\r\n  }, [thongkes]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: SET_ERRORS, payload: {} });\r\n  }, []);\r\n\r\n  return (\r\n    <ReactModal\r\n      style={modalStyles}\r\n      ariaHideApp={false}\r\n      isOpen={isOpen}\r\n      onRequestClose={onClose}\r\n      overlayClassName=\"overlay\"\r\n      shouldCloseOnOverlayClick={true}\r\n    >\r\n      <div className=\"flex-[0.8] mt-3 mx-5 item-center\">\r\n        <div className=\"flex items-center justify-center gap-5\">\r\n          <button\r\n            className={classes.adminFormClearButton}\r\n            type=\"button\"\r\n            onClick={onClose}\r\n          >\r\n            thoát\r\n          </button>\r\n        </div>\r\n        {/* <p className=\"block text-black \">Thống Kê</p> */}\r\n        <div className=\"items-center my-8 mt-2 mb-2 rounded-lg\">\r\n          <form\r\n            className=\"flex flex-col col-span-1 space-y-2\"\r\n            onSubmit={handleSubmit}\r\n          >\r\n            <label htmlFor=\"department\">Biểu đồ Thống kê theo: </label>\r\n\r\n            <div className=\"flex\">\r\n              <div>\r\n                <Select\r\n                  required\r\n                  displayEmpty\r\n                  sx={{ height: 36 }}\r\n                  inputProps={{ \"aria-label\": \"Without label\" }}\r\n                  value={value.col}\r\n                  onChange={(e) => setValue({ ...value, col: e.target.value })}\r\n                  className={`${classes.InputStyle} hover:focus:border-none w-[166px] `}\r\n                >\r\n                  <MenuItem value=\"\">NONE</MenuItem>\r\n\r\n                  <MenuItem value=\"CC\">Chuyên cần</MenuItem>\r\n                  <MenuItem value=\"GK\">Giữa kỳ</MenuItem>\r\n                  <MenuItem value=\"CK\">Kuoiws kỳ</MenuItem>\r\n                  <MenuItem value=\"TB\">Trung bình</MenuItem>\r\n                  <MenuItem value=\"XEPLOAI\">Xếp loại</MenuItem>\r\n                </Select>\r\n              </div>\r\n\r\n              <button\r\n                className={`${classes.adminFormSubmitButton} w-56 ml-3`}\r\n                type=\"submit\"\r\n              >\r\n                Search\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        <div className={classes.loadingAndError}>\r\n          {loading && thongkes?.length !== 0 && (\r\n            <Spinner\r\n              message=\"Loading\"\r\n              height={50}\r\n              width={150}\r\n              color=\"#157572\"\r\n              messageColor=\"#157572\"\r\n            />\r\n          )}\r\n        </div>\r\n        {!loading && search && thongkes && (\r\n          <div className=\"flex-[0.8] mt-10 mx-5 item-center\">\r\n            <BarChart width={800} height={300} data={thongkes}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"type\" />\r\n              <YAxis\r\n                label={{\r\n                  value: \"Số lượng\",\r\n                  angle: -90,\r\n                  position: \"insideLeft\",\r\n                }}\r\n              />\r\n              <Legend />\r\n\r\n              <Bar\r\n                dataKey=\"soLuong\"\r\n                fill=\"#8884d8\"\r\n                barSize={30}\r\n                label={{\r\n                  position: \"top\",\r\n                }}\r\n              />\r\n            </BarChart>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n};\r\n\r\nexport default ThongKeView;\r\n"]},"metadata":{},"sourceType":"module"}